{"componentChunkName":"component---src-templates-markdown-index-tsx","path":"/post/트리-쉐이킹으로-빌드-사이즈-줄이기/","result":{"data":{"post":{"frontmatter":{"title":"트리 쉐이킹으로 빌드 사이즈 줄이기","date":"2022-10-10T01:36:00.000Z","tags":[{"color":"yellow","id":"1566e0ea-86c3-48a5-a096-a2fc00512205","name":"webpack"},{"color":"brown","id":"c543a31f-8750-455e-8bdd-68e0833f7967","name":"react.js"}],"preview":[],"writer":[{"name":"정보화"}]},"excerpt":"트리쉐이킹 트리 쉐이킹이란? 사용되지 않는 코드를 제거하여 최적화 기법 트리 쉐이킹이 가능한 정도는 앱과 앱에서 사용하고 있는 디펜던시 및 설계 구조에 따라 다름 how? 현재 애플리케이션에서 번들러로 webpack을 사용하고 있으므로 webpack…","html":"<h2 id=\"트리쉐이킹\" style=\"position:relative;\"><a href=\"#%ED%8A%B8%EB%A6%AC%EC%89%90%EC%9D%B4%ED%82%B9\" aria-label=\"트리쉐이킹 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>트리쉐이킹</h2>\n<h3 id=\"트리-쉐이킹이란\" style=\"position:relative;\"><a href=\"#%ED%8A%B8%EB%A6%AC-%EC%89%90%EC%9D%B4%ED%82%B9%EC%9D%B4%EB%9E%80\" aria-label=\"트리 쉐이킹이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>트리 쉐이킹이란?</h3>\n<ul>\n<li>사용되지 않는 코드를 제거하여 최적화 기법</li>\n<li>트리 쉐이킹이 가능한 정도는 앱과 앱에서 사용하고 있는 디펜던시 및 설계 구조에 따라 다름</li>\n</ul>\n<h3 id=\"how\" style=\"position:relative;\"><a href=\"#how\" aria-label=\"how permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>how?</h3>\n<ul>\n<li>\n<p>현재 애플리케이션에서 번들러로 webpack을 사용하고 있으므로 webpack을 사용하여 트리쉐이킹 진행</p>\n</li>\n<li>\n<p><code>require</code> 대신  <code>import</code> 사용</p>\n<ul>\n<li>webpack 버전2부터 ES6의 <code>import</code> 구문이 사용된 파일에 대하여 사용하지 않는 모듈의 export를 감지하는 기능을 제공</li>\n</ul>\n</li>\n<li>\n<p><code>package.json</code> 에서 <code>sideEffects</code> 설정</p>\n<ul>\n<li>webpack 버전 4 부터는 제공</li>\n<li><code>sideEffects: flase</code> : 사용되지 않는 모듈을 삭제하여도 사이드이펙트가 없는 경우</li>\n<li><code>sideEffects: [sideEffects가 있을것 같은 파일 path]</code> : 배열 안에 있는 파일을 제외하고 트리쉐이킹 진행.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"적용\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%9A%A9\" aria-label=\"적용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적용</h2>\n<h3 id=\"application\" style=\"position:relative;\"><a href=\"#application\" aria-label=\"application permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Application</h3>\n<h4 id=\"default-설정-41834kb--40551kb\" style=\"position:relative;\"><a href=\"#default-%EC%84%A4%EC%A0%95-41834kb--40551kb\" aria-label=\"default 설정 41834kb  40551kb permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>default 설정 (418.34KB → 405.51KB)</h4>\n<ul>\n<li>default 설정과 함께 export (418.34KB)</li>\n</ul>\n<p><img src=\"https://bk-ques-blog-resources.s3.ap-northeast-2.amazonaws.com/default-value-before-treeshaking_.jpg\" alt=\"\"></p>\n<ul>\n<li>default 없이 export (405.51KB)</li>\n</ul>\n<p><img src=\"https://bk-ques-blog-resources.s3.ap-northeast-2.amazonaws.com/default-value-after-treeshaking_.jpg\" alt=\"\"></p>\n<ul>\n<li>조직별로 리소스를 모듈화하여 사용하고 있는데, 기본 조직의 정보가 default value로 설정되어있었음</li>\n<li>다른 조직의 경우, 기본조직의 정보가 필요 없으므로 default value 설정 변경</li>\n<li>기본조직 정보가 저장된 파일이 트리쉐이킹되어 번들 용량이 줄어듬</li>\n</ul>\n<h3 id=\"디펜던시\" style=\"position:relative;\"><a href=\"#%EB%94%94%ED%8E%9C%EB%8D%98%EC%8B%9C\" aria-label=\"디펜던시 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>디펜던시</h3>\n<ul>\n<li>CRA에서 공식적으로 추천하는 라이브러리인 <code>explore-source-map</code> 을 사용하여 빌드 사이즈 분석</li>\n<li>용량을 많이 차지하고있는 라이브러리에 대해 tree shaking 진행</li>\n</ul>\n<h4 id=\"lodash\" style=\"position:relative;\"><a href=\"#lodash\" aria-label=\"lodash permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>lodash</h4>\n<p><strong>lodash 사용 (필요한 함수만 가져오기 60.35KB → 4.6KB)</strong></p>\n<ul>\n<li><code>import _ from ‘lodash’</code> (60.35KB)</li>\n</ul>\n<p><img src=\"https://bk-ques-blog-resources.s3.ap-northeast-2.amazonaws.com/lodash-before-treeshaking.jpg\" alt=\"\"></p>\n<ul>\n<li><code>import values from 'lodash/values'</code> (4.6KB)</li>\n</ul>\n<p><img src=\"https://bk-ques-blog-resources.s3.ap-northeast-2.amazonaws.com/lodash-after-treeshaking.jpg\" alt=\"\"></p>\n<p><strong>lodash-es (필요한 함수만 가져오기 84.95KB → 3.65KB)</strong></p>\n<ul>\n<li><code>import _ from lodash-es</code> (84.95 KB)</li>\n</ul>\n<p><img src=\"https://bk-ques-blog-resources.s3.ap-northeast-2.amazonaws.com/lodashes-before-treeshaking.jpg\" alt=\"\"></p>\n<ul>\n<li><code>import { values } from lodash-es</code> (3.65KB)</li>\n</ul>\n<p><img src=\"https://bk-ques-blog-resources.s3.ap-northeast-2.amazonaws.com/lodashes-after-treeshaking.jpg\" alt=\"\"></p>\n<ul>\n<li><code>lodash</code> 의 경우, <code>import</code> 구문을 사용하지않으므로(<code>require</code>로 작성되어있음) <code>import {values} from lodash</code> 로는 최적화 할 수 없음</li>\n<li><code>lodash</code> 나 <code>lodash-es</code> 둘 다 필요한 모듈만 불러오는 경우, 최적화를 할 수 있음</li>\n</ul>\n<h4 id=\"cryptojs\" style=\"position:relative;\"><a href=\"#cryptojs\" aria-label=\"cryptojs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>crypto.js</h4>\n<p><strong>필요한 함수만 가져오기 (51.13KB → 5.26KB)</strong></p>\n<ul>\n<li><code>import crypto from crypto</code> (51.13KB)</li>\n</ul>\n<p><img src=\"https://bk-ques-blog-resources.s3.ap-northeast-2.amazonaws.com/crypto-before-treeshaking.jpg\" alt=\"\"></p>\n<ul>\n<li>(5.26KB)</li>\n</ul>\n<p><img src=\"https://bk-ques-blog-resources.s3.ap-northeast-2.amazonaws.com/crypto-after-treeshaking_.jpg\" alt=\"\"></p>\n<ul>\n<li><code>crypto</code>도  <code>require</code> 로 작성되어있으므로 <code>import cryptoEncHex from 'crypto-js/enc-hex</code> 와 같은 방식으로 필요한 모듈을 불러옴</li>\n</ul>\n<h4 id=\"chartjs\" style=\"position:relative;\"><a href=\"#chartjs\" aria-label=\"chartjs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>chart.js</h4>\n<ul>\n<li>\n<p>용량이 커 트리쉐이킹을 시도하려 했으나, 라이브러리도  <code>import</code> 구문으로 작성되어있고,  이미 트리쉐이킹 된 것으로 확인됨</p>\n<ul>\n<li>참조 : <a href=\"https://github.com/chartjs/Chart.js/issues/10163\">https://github.com/chartjs/Chart.js/issues/10163</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<ul>\n<li><code>ES6</code> 문법을 사용하여 필요한 함수만 가져올 경우 트리쉐이킹이 잘 적용됨</li>\n<li>오래된 라이브러리인 경우 트리쉐이킹을 지원하지 않기도 함 (ex. moment)</li>\n</ul>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%ED%8A%B8%EB%A6%AC%EC%89%90%EC%9D%B4%ED%82%B9\">트리쉐이킹</a></p>\n<ul>\n<li><a href=\"#%ED%8A%B8%EB%A6%AC-%EC%89%90%EC%9D%B4%ED%82%B9%EC%9D%B4%EB%9E%80\">트리 쉐이킹이란?</a></li>\n<li><a href=\"#how\">how?</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%A0%81%EC%9A%A9\">적용</a></p>\n<ul>\n<li>\n<p><a href=\"#application\">Application</a></p>\n<ul>\n<li><a href=\"#default-%EC%84%A4%EC%A0%95-41834kb--40551kb\">default 설정 (418.34KB → 405.51KB)</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%94%94%ED%8E%9C%EB%8D%98%EC%8B%9C\">디펜던시</a></p>\n<ul>\n<li><a href=\"#lodash\">lodash</a></li>\n<li><a href=\"#cryptojs\">crypto.js</a></li>\n<li><a href=\"#chartjs\">chart.js</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EA%B2%B0%EB%A1%A0\">결론</a></p>\n</li>\n</ul>"}},"pageContext":{"id":"695a05ef-b1c6-5170-bdb9-143fd72fc4f4","prevTitle":"사람을 위한 GPG 101 - Part 1","nextTitle":"CORS는 무엇이고, 어떻게 해결할 수 있나요?"}},"staticQueryHashes":[],"slicesMap":{}}